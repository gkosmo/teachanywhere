<div class="row" style="border-style: groove">
  <%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/markerclusterer/src/markerclusterer_compiled.js" %>
  <%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js" %>

  <div class="col-sm-6">

    <h4>  what: <b>  <%= event.title %> </b></h4>
    <h4> what what ? <b> <%= event.content %> </b> </h4>
    <h4> when: <b> <%= event.date %> </b></h4>
    <h4> where: <b> <%= event.location %> </b> </h4>

  </div>

  <div class="col-sm-6">
    <h4> How many: <%= event.attendances.count %> </h4>
    <h4>min attendance  for course: <%= event.min_attendance %> </h4>
    <h4>max attendance  for course: <%= event.max_attendance %> </h4>
    <% unless teacher %>
      <% if event.attendances.where(user: current_user).empty? && event.attendances.length < event.max_attendance %>
        <%= simple_form_for Attendance.new(event: event), url: course_event_attendances_path(event.course, event) do |form| %>
          <%= form.submit 'submit' %>
        <% end %>
      <% elsif event.attendances.length == event.max_attendance %>
            <h5> Max out class </h5>
      <%else %>
    <h7 class="btn btn-warning"> <%= event.attendances.where(user: current_user).first.status %> </h7>
    <% end %>
  <% end %>
   <h5> <b>attendees: </b></h5>
   <ul>

  <% event.attendances.each do |attendance| %>
  <li> <h6> <%= attendance.user.email %></h6> </li>
  <% end %>
</ul>

  </div>

  <div id="<%= event.id %>" style='width: 200px; height: 200px;' class= 'img-res'>

  </div>

</div>



<% content_for(:after_js) do %>
<script type="text/javascript">
 $(function(handler) {
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: { id: <%= event.id%> } }, function(){
    markers = handler.addMarkers([
    {
      "lat": <%= event.latitude %>,
      "lng": <%= event.longitude %>,
      "infowindow": "hello!"
    }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(12);
  });
});

</script>
<%end%>
